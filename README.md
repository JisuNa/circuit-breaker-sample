# resilience4j

## Circuit Breaker

### Configure

| Config property                              | Default Value      | Description                                                                                                                                                                                                                                                                                |
|----------------------------------------------|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| failureRateThreshold                         | 50                 | 실패율 임계값을 백분율로 구성합니다.<br/> 실패율이 임계값보다 크거나 같으면 Circuit Breaker가 OPEN 상태로 전환되고 Fallback 호출을 시작합니다.                                                                                                                                                                                            |
| slowCallRateThreshold                        | 100                | 임계값을 백분율로 구성합니다. Circuit Breaker는 통화 시간이 slowCallDurationThreshold보다 클 때 통화를 느린 것으로 간주합니다. 느린 호출의 비율이 임계값과 같거나 크면 CircuitBreaker가 개방으로 전환되고 단락 호출을 시작합니다.                                                                                                                                  |
| slowCallDurationThreshold                    | 60000 [ms]         | 호출 지연 임계값 설정. 설정된 값보다 호출이 지연된 경우 임계값을 증가 시킵니다.                                                                                                                                                                                                                                             |
| permittedNumberOfCallsInHalfOpenState        | 10                 | HALF_OPEN 상태일 때 허용되는 호출 수 설정                                                                                                                                                                                                                                                               |
| maxWaitDurationInHalfOpenState               | 0 [ms]             | Circuit Breaker 가 OPEN 전환되기 전에 HALF_OPEN 으로 상태로 유지될 수 있는 가장 긴 시간을 제어하는 최대 대기 시간을 구성합니다. 0 값은 회로 차단기가 허용된 모든 호출이 완료될 때까지 HALF_OPEN 상태에서 무한 대기함을 의미합니다.                                                                                                                                      |
| slidingWindowType                            | COUNT_BASED        | CircuitBreaker 가 CLOSE 상태일 때 호출 결과를 기록하는 데 사용되는 슬라이딩 윈도우의 유형을 구성합니다. 슬라이딩 윈도우는 count-based 또는 time-based.                                                                                                                                                                                  |
| slidingWindowSize                            |                    | CircuitBreaker 가 CLOSE 상태일 때 호출 결과를 기록하는 데 사용되는 슬라이딩 윈도우의 크기를 구성합니다.                                                                                                                                                                                                                       |
| minimumNumberOfCalls                         | 100                | 최소 호출을 설정. 호출 실패가 임계값을 넘어도 최소 호출을 하지 않으면 OPEN 상태로 변경되지 않습니다.                                                                                                                                                                                                                               |
| waitDurationInOpenState                      | 60000 [ms]         | OPEN 상태에서 HALF_OPEN 으로 상태로 전환되는 시간                                                                                                                                                                                                                                                         |
| automaticTransitionFromOpenToHalfOpenEnabled | false              | true인 경우 Circuit Breaker 가 자동으로 open 상태에서 HALF_OPEN 으로 상태로 전환합니다. waitDurationInOpenState 가 지나면 CircuitBreakers 의 모든 인스턴스를 모니터링하여 HALF_OPEN 으로 전환하는 스레드가 생성됩니다.<br/>false인 경우 waitDurationInOpenState 시간이 지난 후에 호출이 발생한 경우에만 HALF_OPEN 으로 전환합니다. 장점은 스레드가 모든 회로 차단기의 상태를 모니터링하지 않는다는 것입니다. |
| recordExceptions                             | empty              | 실패로 기록하고 실패율을 증가시키는 Exception 목록                                                                                                                                                                                                                                                           |
| ignoreExceptions                             | empty              | 실패를 기록하고 실패율을 증가시키지 않는 Exception 목록                                                                                                                                                                                                                                                        |
| recordFailurePredicate                       | throwable -> true  | 실패를 기록할 Exception 정의한 파일 위치 설정                                                                                                                                                                                                                                                             |
| ignoreExceptionPredicate                     | throwable -> false | 실패를 기록하지 않는 Exception 정의한 파일 위치 설정                                                                                                                                                                                                                                                         |
